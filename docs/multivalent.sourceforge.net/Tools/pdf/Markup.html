<html>
<head>
<title>Multivalent Tools: PDF Markup</title>
<style>
@import url("../../style.css");
</style>
</head>

<body>

<h2 id='Markup'>Markup</h2>

Markup a PDF with hyperlinks, bookmark / outline, page numbers, and so on.
<!-- Better to do this in source, but sometimes not possible, so this too lets you apply markup post facto.-->

<ul>
<li>Scan for URLs and make into hyperlinks.
<li>Scan for page references ("see page 5") and make into hyperlinks.
<li>Scan for section headers and make into a hierarchical outline/bookrmarks.
<li>Add page numbers
</ul>

<p>Markup can be specified by a file or with patterns.
For a PDF that is long and has complicated structure, try the <span class='opt'>-analyze</span>
to automatically collect most of the data into a file, then manually tune it, and finally
use <span class='opt'>-apply</span> to fuse the data to the PDF and make it active.


<h3>Options</h3>

<blockquote><code>java tool.pdf.Markup <i>[options]</i> <var>PDF-file(s)</var></code></blockquote>

<ul class='options'>
<li>Scanning
<ul>
<li id='url'><span class='opt'>-url</span> -- 
Scan for URLs and make into hyperlinks.

<!--
<li id='email'><span class='opt'>-url</span> -- 
Scan for email addresses and make into hyperlinks. => not supported in PDF?
-->

<li id='page'><span class='opt'>-pageref</span> -- 
Scan for table of contents and page and section references ("page 5", "see Appendix A") and make into local hyperlinks.
skip over troublesome parts, like table of contents

<li id='header'><span class='opt'>-header <var>expression</var></span> --
find section headers in the text and build and outline / bookmarks,
where <var>expression</var> is:
<ul>
<li><var>regular expression</var> which is matched against the text.
Subheaders and subsubheaders can be matched with
<span class='opt'>-header2 <var>regular-expression</var></span>,
<span class='opt'>-header3 <var>regular-expression</var></span>, and
<span class='opt'>-header4 <var>regular-expression</var></span>,
<li><code>number</code> -- 
matches lines that start with a number, like "5.3.4 Protein Density",
and finds headers, subheaders, and subsubheaders.
Useful for academic papers, expecially those produced by TeX.
<li><code>numberdot</code> -- 
like <code>number</code>, but numbers end with a period, which is a fact that helps distinguish them from false hits
<li><code>outline</code> -- 
Roman numbers, letters.
<li><code>slides</code> --
makes each page an outline entry with text taken from the first line or two
<li><code>font</code> --
tries to distinguish headers from body text by using font size and style

</ul>

<li id='analyze'><span class='opt'>-analyze</span>
or <span class='opt'>-nowrite</span> -- 
scan only, for the types selected in other options above.
Reporting discoveries for use in a database,
or to be tuned and applied.

</ul>

<li>Additional markup (no scanning required)
<ul>
<li id='pagenum'><span class='opt'>-pagenum <var>start</var></span> -- add page numbers, starting with number <var>start</var>.
Can be used to Apply continuous page numbering across a set of PDFs or a <a href='Merge.html'>merged</a> PDF.
<!--li id='bates'><span class='opt'>-bates <var>start</var></span> -- bates numbering, starting with number <var>start</var>-->
<!--li id='barcode'><span class='opt'>-barcode</span> -- barcodes-->
<!--li id=''><span class='opt'>-apply <var>file</var></span> -- "DRAFT" => stamp, which merges PDF pages -->

</ul>

<li>Writing
<ul>
<li id='apply'><span class='opt'>-apply <var>file</var></span> -- 
take a <var>file</var> in the format produced by <span class='opt'>-analyze</span>,
perhaps manually tuned or generated by another program,
and apply the markup operations.
If <span class='opt'>-apply</span> is in effect, no scanning is done.

<li id='overwrite'><span class='opt'>-overwrite</span> -- 
overwrite an existing outline / bookmark set
</ul>

<li id='page'><span class='opt'>-page <a href='http://multivalent.sourceforge.net/Tools/HowToRun.html#range'><var>range</var></a></span> --
only scan/apply in given page range.
This allows different rules for different parts of a document.  For example,
in an index, perhaps every number should be treated as a page reference,
whereas in the body of the text, numbers should be considered pages
only if part of a pattern like "see page <var>n</var>".


<li id='verbose'><span class='opt'>-verbose</span> -- 
display text that matches some pattern as encountered
<!--
<li><span class='opt'>-password <var>password</var></span> -- password if PDF is encrypted
-->
</ul>


<h3 id='examples'>Examples</h3>



<h3 id='format'>Format of Markup Description File</h3>

<ul>
<li>One record per line.
<li>Comment lines start with number sign (<code>#</code>).
<li>Record types
<ul>
<li><code>url <var>bbox</var> <var>url</var></code>
<li><code>pageref <var>bbox</var> <var>page-number</var></code>
<li><code>head1 <var>page-number</var> <var>label</var></code>
<li><code>head2 <var>page-number</var> <var>label</var></code>
<li><code>head3 <var>page-number</var> <var>label</var></code>
<li><code>head4 <var>page-number</var> <var>label</var></code>
</ul>
</ul>

<p>Example
<pre>
</pre>

<p>Often it's easiest to first run with <span class='opt'>-analyze</span>,
capture the output in a file, edit, 
and then apply the markup to the PDF with <span class='opt'>-apply <var>file</var></span>.

<p>If somehow have similar,
just run through some text processing software, like Perl,
to massage the file into the exact format.

<!--
<h3 id='seealso'>See Also</h3>

For PDFs with a large outline, converting to PDF 1.5 (supported by Acrobat 6) with <a href='Compress.html'>Compress</a>,
can substantially reduce space.

<p>PDF Shootout

<p><a href='Stamp.html'>Stamp tool</a> to add arbitrary text and graphics 
for another way to add page numbers
-->
</body>
</html>
